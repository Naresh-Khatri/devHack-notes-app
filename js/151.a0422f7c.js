(self["webpackChunkd2c_notes_frontend"]=self["webpackChunkd2c_notes_frontend"]||[]).push([[151],{4070:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>K});l(246);var a=l(3673),i=l(8880),s=l(1959),o=l(2323),n=l(3308),c=l(8825),d=l(3617),r=l(9582),u=l(5474),p=l(4341);l(7270);const m={class:"row inline card bg-dark shadow-15 q-ma-md",style:{width:"350px"}},g={class:"col-8 flex"},v={class:"text-bold line-clamp-3",style:{"font-size":"16px"}},f={class:"text-subtitle text-grey",style:{"font-size":"12px"}},w={class:"q-my-md"},y={key:0},h={key:1},b={class:"col-4",style:{display:"flex","flex-direction":"column","justify-content":"space-between","align-items":"flex-end"}},k={props:{image:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},btnText:{type:String,default:""},btnIcon:{type:String,default:""},link:{type:String},fileType:{type:String,default:""}},emits:["onDelete","onPressed"],setup(e,{emit:t}){const l=e,d=(0,c.Z)(),r=(n.O,l.image,async e=>{try{d.dialog({title:"Delete this file?",message:"Are you sure you want to delete this file?",color:"negative",cancel:{label:"Cancel",flat:!0,color:"primary"},ok:{label:"Delete",color:"negative"},style:"border-radius:25px 25px 0 0;",position:"bottom"}).onOk((()=>{t("onDelete",e)})).onCancel((()=>{console.log("cancelled")}))}catch(l){console.log(l)}}),u=()=>{t("onPressed")};return(t,l)=>{const c=(0,a.up)("q-btn"),d=(0,a.up)("router-link"),p=(0,a.up)("q-icon"),k=(0,a.up)("q-img");return(0,a.wg)(),(0,a.j4)(i.uT,{appear:"","enter-active-class":"animated  slideInUp","leave-active-class":"animated fadeOut"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(i.uT,{appear:"","enter-active-class":"animated backInRight","leave-active-class":"animated fadeOut"},{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a._)("div",v,(0,o.zw)(e.title),1),(0,a._)("div",f,(0,o.zw)(e.description),1),(0,a._)("div",w,[e.link?((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(d,{to:e.link},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:e.btnText,flat:"",rounded:"",color:"black",style:{background:"white"}},null,8,["label"])])),_:1},8,["to"])])):((0,a.wg)(),(0,a.iD)("div",h,[(0,a.Wm)(c,{label:e.btnText,flat:"",rounded:"",color:"black",style:{background:"white"},onClick:u},null,8,["label"])]))])])])),_:1}),(0,a._)("div",b,[(0,a.Wm)(i.W3,{appear:"","enter-active-class":"animated backInLeft","leave-active-class":"animated fadeOut",duration:5e3},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{key:"1",class:"z-index:10",name:"fas fa-trash",onClick:r}),(0,a.Wm)(k,{key:"2",class:"q-mt-md preview-img",src:(0,s.SU)(n.O)+"/"+e.image},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{style:{position:"absolute",right:"0",bottom:"0"},name:"far fa-file-pdf",color:"red",size:"lg"})])),_:1},8,["src"])])),_:1})])])])),_:1})}}};var x=l(8240),_=l(4554),q=l(4027),D=l(7030),W=l(7518),C=l.n(W);const Z=k,Q=Z;C()(k,"components",{QBtn:x.Z,QIcon:_.Z,QImg:q.Z,QChip:D.Z});const I={class:"row",style:{width:"100%"}},S={class:"col"},F={class:"float-right absolute-right-top flex column items-end"},O={key:1,class:"text-subtitle"},P={key:0,class:"col-3",style:{width:"70%",border:"2px dashed black"}},j={key:0},V={style:{width:"100%"},class:"q-mt-md flex flex-center"},z=(0,a._)("div",{class:"q-mt-xl text-h5 text-subtitle"},"Description",-1),H=(0,a._)("div",{class:"q-mt-xl text-h5 text-subtitle"},"Select a thumbnail",-1),T={setup(e){const t=(0,d.oR)(),l=((0,r.tv)(),(0,c.Z)()),m=(0,a.Fl)((()=>t.state.userData)),g=(0,a.Fl)((()=>t.state.materials)),v=(0,s.iH)(""),f=(0,s.iH)("lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, quidem. "),w=(0,s.iH)(!1),y=(0,s.iH)(null),h=(0,s.iH)(""),b=(0,s.iH)(""),k=(0,s.iH)(null);(0,a.bv)((()=>{console.log(p),t.dispatch("getMaterials","1234")}));const x=e=>{console.log("changed");const t=e.target.files[0];if(t.size>3e7)return l.dialog({title:"File too large ðŸ˜³",message:"File size should be less than 30MB"}),void q();_(t),v.value=t.name,k.value=t},_=async e=>{console.log(e);const t=new FileReader;t.readAsArrayBuffer(e);t.onload=async()=>{const e=t.result;try{b.value=0,h.value=await D(e,10)}catch(a){l.notify({message:"Error: "+a.message+"ðŸ˜­",color:"negative"}),q()}}},q=()=>{v.value="",f.value="",y.value="",h.value="",b.value="",k.value=null},D=async(e,t)=>{const l=await p.getDocument(e).promise,a=[],i=l.numPages;return t=i<t?i:t,new Promise((async(e,i)=>{for(let s=1;s<=t;s++){const e=await l.getPage(s),t=e.getViewport({scale:1}),i=document.createElement("canvas"),o=i.getContext("2d");i.height=t.height,i.width=t.width;const n={canvasContext:o,viewport:t};await e.render(n).promise,a.push(i.toDataURL())}e(a)}))},W=async()=>{const e=await(await fetch(h.value[b.value])).blob(),a=new FormData;a.append("uid",m.value.uid),a.append("classroomID","1234"),a.append("title",v.value),a.append("description",f.value),a.append("subject","Data Structures and Algorithms"),a.append("fileName",k.value.name),a.append("file",k.value),a.append("preview",e,k.value.name);try{await u.api.post("/uploads/pdf",a);l.notify({position:"top",color:"positive",textColor:"white",message:"File uploaded successfully"}),t.dispatch("getMaterials","1234"),k.value="",w.value=!1}catch(i){l.notify({position:"top",color:"negative",textColor:"white",message:"Could not upload file"})}},C=async e=>{window.location.href=`${n.O}/uploads/material/${e}?download=false`},Z=e=>{console.log("deleting this shit"),u.api["delete"]("/uploads/material/"+e).then((e=>{console.log(e),l.notify({position:"top",color:"positive",textColor:"white",message:"File deleted successfully"}),t.dispatch("getMaterials","1234")})).catch((e=>{console.log(e),l.notify({position:"top",color:"negative",textColor:"white",message:"File not deleted"})}))};return(e,t)=>{const l=(0,a.up)("q-btn"),n=(0,a.up)("q-img"),c=(0,a.up)("q-card-section"),d=(0,a.up)("q-icon"),r=(0,a.up)("q-file"),u=(0,a.up)("q-input"),p=(0,a.up)("q-chip"),m=(0,a.up)("q-scroll-area"),y=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(y,{padding:"",class:"f lex flex -center"},{default:(0,a.w5)((()=>[(0,a._)("div",I,[(0,a._)("div",S,[(0,a._)("div",F,[(0,a.Wm)(l,{size:"lg",icon:w.value?"close":"add",title:w.value?"close":"add",round:"",onClick:t[0]||(t[0]=e=>w.value=!w.value)},null,8,["icon","title"]),(0,a.Wm)(i.W3,{appear:"","enter-active-class":"animated tada"},{default:(0,a.w5)((()=>[w.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(n,{key:0,class:"q-mr-lg q-mt-sm",width:"50px",src:"https://www.gstatic.com/classroom/web/home/dark_create_class_arrow.svg"})),w.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",O,"Add a new note"))])),_:1})]),(0,a.Wm)(c,{class:"flex justify-center",style:{"margin-bottom":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(g),((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t},[(0,a.Wm)(Q,{class:"q-my-sm align-strech",title:e.title,description:e.description,image:e.previewPath,link:e.link,fileType:"PDF",btnText:"view",btnIcons:"download",onOnPressed:t=>C(e._id),onOnDelete:t=>Z(e._id)},null,8,["title","description","image","link","onOnPressed","onOnDelete"])])))),128))])),_:1})]),w.value?((0,a.wg)(),(0,a.iD)("div",P,[(0,a.Wm)(i.W3,{appear:"","enter-active-class":"animated fadeIn"},{default:(0,a.w5)((()=>[w.value?((0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("div",V,[(0,a.Wm)(r,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value=e),label:"Pick a file",filled:"",counter:"",accept:".pdf, doc/*",style:{width:"300px"},onInput:x},{prepend:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"attach_file"})])),_:1},8,["modelValue"])]),k.value?((0,a.wg)(),(0,a.j4)(c,{key:0,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"q-my-md",label:"Title",modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=e=>v.value=e)},null,8,["modelValue"]),z,(0,a.Wm)(u,{filled:"",type:"textarea",modelValue:f.value,"onUpdate:modelValue":t[3]||(t[3]=e=>f.value=e)},null,8,["modelValue"]),H,(0,a.Wm)(m,{style:{height:"250px",border:"1px dashed black"},class:"q-ma-sm flex flex-center"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(h.value,((e,t)=>((0,a.wg)(),(0,a.j4)(n,{key:t,style:(0,o.j5)([b.value==t?"border: 2px solid #2196f3;":"",{width:"100px"}]),src:e,onClick:e=>b.value=t},{default:(0,a.w5)((()=>[b.value==t?((0,a.wg)(),(0,a.j4)(p,{key:0,label:b.value+1},null,8,["label"])):(0,a.kq)("",!0)])),_:2},1032,["style","src","onClick"])))),128))])),_:1}),(0,a.Wm)(l,{icon:"upload",label:"Upload",style:{float:"right"},color:"positive",onClick:W})])),_:1})):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])),_:1})])):(0,a.kq)("",!0)])])),_:1})}}};var U=l(4379),A=l(5589),B=l(1052),M=l(2426),R=l(7704);const E=T,K=E;C()(T,"components",{QPage:U.Z,QBtn:x.Z,QImg:q.Z,QCardSection:A.Z,QFile:B.Z,QIcon:_.Z,QInput:M.Z,QScrollArea:R.Z,QChip:D.Z})},4663:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);